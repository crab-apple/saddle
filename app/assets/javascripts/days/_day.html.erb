<div class="row">
  <button class="btn btn-link" ui-sref="calendar({date:'{{localDate.asStr}}'})">
    <span class="fa fa-calendar"></span> Calendari
  </button>
</div>
<div class="row h3">

  <div class="col-xs-2 text-left">
    <a role="button" ng-click="prevDay()">
      <span class="fa fa-chevron-left"></span>
    </a> 
  </div>
  <div class="col-xs-8 text-center">
    {{localDate | saddleLongDate}}
  </div>
  <div class="col-xs-2 text-right">
    <a role="button" ng-click="nextDay()">
      <span class="fa fa-chevron-right"></span>
    </a> 
  </div>
</div>

<div class="row clearfix">
  <div class="col-xs-12">
    <a ui-sref="outings-new({date:'{{localDate.asStr}}'})" class="btn btn-primary btn-sm pull-right">
      <span class="fa fa-fw fa-plus"></span>Excursi√≥
    </a>
  </div>
</div>

<div class="day-reservation-list">

  <div class="row outing" ng-class="{'outing-confirmed': outing.confirmed}" ng-repeat-start="outing in day.outings | orderBy : 'time' ">
    <div class="col-sm-12">
      <div class="outing-content clearfix">
        <p class="h4 outing-text">
          {{outing.time}} {{outing.name}}
          -
          {{outing.takenPlaces}}/{{outing.numAvailableHorses}}
          <span
            ng-class="{'text-danger': outing.takenPlaces > outing.numAvailableHorses,
                       'text-success': outing.takenPlaces < outing.numAvailableHorses,
                       'text-muted': outing.takenPlaces == outing.numAvailableHorses}"
          > ({{outing.numAvailableHorses - outing.takenPlaces}}) </span>
        </p>
        <div class="pull-right">
          <div ng-show="outing.confirmed">
            <button class="btn-link btn-really-link" ui-sref="outings-edit({id:{{outing.id}}})"><span class="fa fa-fw fa-pencil"/></button>
            <button class="btn-link btn-really-link" ui-sref="outings-delete({id:{{outing.id}}})" ng-disabled="outing.reservations.length">
              <span class="fa fa-fw fa-trash"/>
            </button>
            <button class="btn btn-xs btn-primary" role="button" ui-sref="reservations-new({outingId: {{outing.id}}})">
              <span class="fa fa-plus"></span> Reserva
            </button>
          </div>
          <div ng-show="!outing.confirmed">
            <button class="btn btn-link btn-really-link" ng-show="!outing.confirmed" ng-click="confirmOuting(outing.defaultOutingId)"><span class="fa fa-fw fa-check"/></button>
            <button class="btn btn-link btn-really-link" ng-click="dismissDefaultOuting(outing.defaultOutingId)">
              <span class="fa fa-fw fa-trash"/>
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <hr ng-repeat-start="reservation in outing.reservations" class="reservationSeparator"/>
  <div class="row reservation">
    <div class="col-xs-6 col-sm-2">
      <span class="fa fa-fw fa-users"></span>
      {{reservation.numAdults + reservation.numChildren}} - {{reservation.numChildren}}
    </div>
    <div class="col-xs-6 col-sm-2">
      {{reservation.skillLevel}}
    </div>
    <div class="col-xs-6 col-sm-3">{{reservation.name}}</div>
    <div class="col-xs-6 col-sm-3">
      {{reservation.phone}}
      <% if false %>
      <a href="tel:{{reservation.phone}}"><span class="fa fa-phone"></span></a>
      <a href="skype:{{reservation.phone}}"><span class="fa fa-skype"></span></a>
      <% end %>
    </div>
    <div class="col-sm-2 text-right">
      <a role="button" ui-sref="reservations-edit({id: {{reservation.id}}})">
        <span class="fa fa-fw fa-pencil"></span>
      </a>
      <a role="button" ui-sref="reservations-delete({id: {{reservation.id}}})">
        <span class="fa fa-fw fa-trash"></span>
      </a>

    </div>
  </div>
  <div class="row"
       ng-init="folded = true"
       ng-click="folded = !folded"
       uib-tooltip="{{reservation.comments}}"
       tooltip-enable="{{folded}}"
       tooltip-placement="bottom"
       tooltip-popup-delay="1000"
       tooltip-class="rsv-comments-tooltip">
    <div class="col-xs-12">
      <div class="saddle-rsv-row-comments" ng-class="{folded: folded}">{{reservation.comments}}</div>
    </div>
  </div>
  <div class="row" ng-repeat-end></div> <%# End of reservation %>
  <div class="row" ng-repeat-end></div> <%# End of outing %>

</div>
